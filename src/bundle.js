!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(t,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;o(this,e),this.text=t,this.creationDate=n||new Date,this.state=a,this.dueDate=r||null,this.id=s||Math.random().toString(36).replace("0.","id")},i=function e(t){o(this,e),this.list=[]},l=function(){function e(){o(this,e),this.todoList=new i,this.storageService=new c}return r(e,[{key:"getAllTasks",value:function(){return this.getList(),this.todoList.list.map(function(e){return new s(e.text,e.creationDate,e.state,e.dueDate,e.id)})}},{key:"createTask",value:function(e){return new s(e)}},{key:"getList",value:function(){this.storageService.loadList(this.todoList)}},{key:"addTaskToList",value:function(e){this.todoList.list.push(e),this.storageService.saveList(this.todoList)}},{key:"createAndAddToList",value:function(e){var t=this.createTask(e);return this.addTaskToList(t),t}},{key:"updateTaskText",value:function(e,t){t&&(this.todoList.list.find(function(t){return t.id===e}).text=t,this.storageService.saveList(this.todoList))}},{key:"changeTaskState",value:function(e,t){var n=this.todoList.list.find(function(t){return t.id===e});return n.state=t,n.dueDate=t?null:new Date,this.storageService.saveList(this.todoList),n}},{key:"removeTask",value:function(e){this.todoList.list=this.todoList.list.filter(function(t){return t.id!==e}),this.storageService.saveList(this.todoList)}}]),e}(),c=function(){function e(){o(this,e)}return r(e,[{key:"saveList",value:function(e){var t=JSON.stringify(e.list);localStorage.setItem("todoList",t)}},{key:"loadList",value:function(e){var t=localStorage.getItem("todoList");e.list=t?JSON.parse(t):[],e.list.forEach(function(e){e.creationDate=e.creationDate?new Date(e.creationDate):null,e.dueDate=e.dueDate?new Date(e.dueDate):null})}},{key:"saveSort",value:function(e,t){localStorage.setItem(e,t)}},{key:"restoreSort",value:function(e){return localStorage.getItem(e)}}]),e}(),d=new l,u=new c;document.getElementById("createTaskButton").addEventListener("click",function(){var e=document.getElementById("createTaskInput"),t=e.value,n=d.createAndAddToList(t);e.value="",function(e){var t=document.getElementById("openTasksList"),n=T(e);t.appendChild(n),A("openTasksList",document.getElementById("openTasksSort").value)}(n)}),document.getElementById("openTasksClear").addEventListener("click",I),document.getElementById("doneTasksClear").addEventListener("click",I);var v=document.getElementById("openTasksSort");v.addEventListener("change",B);var y=document.getElementById("doneTasksSort");y.addEventListener("change",B),document.getElementById("searchInput").addEventListener("keyup",function(e){var t=e.target.value,n=document.getElementById("openTasksList").children,a=document.getElementById("doneTasksList").children;if(""===t)return function(e,t){var n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.style.display="flex"}}catch(e){a=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}var i=!0,l=!1,c=void 0;try{for(var d,u=t[Symbol.iterator]();!(i=(d=u.next()).done);i=!0){d.value.style.display="flex"}}catch(e){l=!0,c=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw c}}}(n,a);var r=!0,o=!1,s=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;c.querySelector("span").textContent.includes(t)?c.style.display="flex":c.style.display="none"}}catch(e){o=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}var d=!0,u=!1,v=void 0;try{for(var y,f=a[Symbol.iterator]();!(d=(y=f.next()).done);d=!0){var p=y.value;p.querySelector("span").textContent.includes(t)?p.style.display="flex":p.style.display="none"}}catch(e){u=!0,v=e}finally{try{d||null==f.return||f.return()}finally{if(u)throw v}}});var f,p,m=d.getAllTasks(),h=!0,k=!1,g=void 0;try{for(var L,S=m[Symbol.iterator]();!(h=(L=S.next()).done);h=!0){var C=L.value,x=T(C);if(C.state)document.getElementById("openTasksList").appendChild(x);else document.getElementById("doneTasksList").appendChild(x)}}catch(e){k=!0,g=e}finally{try{h||null==S.return||S.return()}finally{if(k)throw g}}function T(e){var t=document.createElement("div");t.id=e.id,t.className="taskItem";var n=document.createElement("input");n.type="checkbox",n.id="taskCheckbox",e.state||(n.checked=!0),n.addEventListener("change",D),t.appendChild(n);var a=document.createElement("span");a.textContent=e.text,a.className="value",a.addEventListener("dblclick",b),t.appendChild(a);var r=document.createElement("input");r.type="text",r.id="taskInput",r.style.display="none",t.appendChild(r);var o=document.createElement("div");o.className="dateDiv",t.appendChild(o);var s=document.createElement("span"),i=e.creationDate;s.textContent=E(i),s.className="date",o.appendChild(s);var l=document.createElement("span");l.className="date";var c=e.dueDate;l.textContent=E(c),o.appendChild(l);var d=document.createElement("img");return d.src="https://cdn4.iconfinder.com/data/icons/devine_icons/Black/PNG/Folder%20and%20Places/Trash-Recyclebin-Empty-Closed.png",d.className="removeImg",d.width=20,d.style.display="none",d.addEventListener("click",q),t.addEventListener("mouseenter",N),t.addEventListener("mouseleave",O),t.appendChild(d),t}function E(e){if(!e)return"";var t=e.getHours(),n=e.getMinutes(),a=t>=12?"pm":"am";return(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+a}function b(e){var t=e.target,n=e.target.closest("div").querySelector('input[type="text"]');n.value=t.textContent,t.style.display="none",n.style.display="block",n.addEventListener("keydown",w)}function w(e){if("Enter"===e.key||"Escape"===e.key){var t=e.target,n=e.target.closest("div"),a=n.querySelector('span[class="value"]');if("Enter"===e.key){a.textContent=t.value;var r=n.id;d.updateTaskText(r,t.value)}a.style.display="block",t.style.display="none"}}function D(e){var t=e.target.closest("div"),n=t.id,a=!e.target.checked,r=d.changeTaskState(n,a);if(!1===a){var o=t.querySelectorAll("span")[2],s=r.dueDate;o.textContent=E(s)}else{t.querySelectorAll("span")[2].textContent=r.dueDate}!function(e){var t;t="openTasksList"===e.parentNode.id?"doneTasksList":"openTasksList";document.getElementById(t).appendChild(e)}(t),A(t.parentNode.id,t.parentNode.parentNode.querySelector('select[class="sort"]').value)}function I(e){for(var t=e.target.parentNode.parentNode.querySelector('div[class="taskList"]').children,n=t.length-1;n>=0;--n){var a=t[n].id;d.removeTask(a),t[n].remove()}}function q(e){var t=e.target.parentNode,n=t.id;d.removeTask(n),t.remove()}function B(e){var t=e.target.value,n=e.target;A("openTasksSort"===n.id?"openTasksList":"doneTasksList",t),u.saveSort(n.id,t)}function A(e,t){var n=document.getElementById(e),a=n.children,r=Array.prototype.slice.call(a,0);switch(t){case"Date creation (Asc)":r.sort(function(e,t){var n=e.querySelector('span[class="date"]').textContent.toLowerCase(),a=t.querySelector('span[class="date"]').textContent.toLowerCase();return a>n?-1:a<n?1:0});break;case"Date creation (Desc)":r.sort(function(e,t){var n=e.querySelector('span[class="date"]').textContent.toLowerCase(),a=t.querySelector('span[class="date"]').textContent.toLowerCase();return a>n?1:a<n?-1:0});break;case"Text (Asc)":r.sort(function(e,t){var n=t.querySelector("span").textContent.toLowerCase(),a=e.querySelector("span").textContent.toLowerCase();return n>a?-1:n<a?1:0});break;case"Text (Desc)":r.sort(function(e,t){var n=t.querySelector("span").textContent.toLowerCase(),a=e.querySelector("span").textContent.toLowerCase();return n>a?1:n<a?-1:0});break;case"Due date creation (Asc)":r.sort(function(e,t){var n=e.querySelectorAll("span")[2].textContent.toLowerCase(),a=t.querySelectorAll("span")[2].textContent.toLowerCase();return a>n?-1:a<n?1:0});break;case"Due date creation (Desc)":r.sort(function(e,t){var n=e.querySelectorAll("span")[2].textContent.toLowerCase(),a=t.querySelectorAll("span")[2].textContent.toLowerCase();return a>n?1:a<n?-1:0})}var o=!0,s=!1,i=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;n.appendChild(d)}}catch(e){s=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw i}}}function N(e){e.target.querySelector("img").style.display="block"}function O(e){e.target.querySelector("img").style.display="none"}f=u.restoreSort("openTasksSort"),p=u.restoreSort("doneTasksSort"),A("openTasksList",f),A("doneTasksList",p),v.value=f,y.value=p}]);
//# sourceMappingURL=bundle.js.map